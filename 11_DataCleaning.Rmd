---
title: "11_DataCleaning"
output: html_document
---

```{r setup, include=FALSE}
# Load all required libraries
source("00_requirements.R")

harry_potter <- read_file("Harry Potter All Books.txt")

hp_clean <- harry_potter %>%
  #convert all the letters to lowercase
  tolower() %>%
  #remove unwanted symbols
  replace_non_ascii() %>%
  #remove extra spaces and line breaks
  str_squish()


percy1_text <- read_file("Percy Jackson 1.txt")

percy1_clean <- percy1_text %>%
  tolower() %>%
  replace_non_ascii() %>%
  #remove special characters
  str_replace_all("[■©:.!?”“—(),;’‘_]", " ") %>%  
  #remove all numbers
  str_replace_all("[0-9]", "") %>%                
  str_squish()                                   

percy2_text <- read_file("Percy Jackson 2.txt")

percy2_clean <- percy2_text %>%
  tolower() %>%
  replace_non_ascii() %>%
  str_replace_all("[■©:.!?”“—(),;’‘_]", " ") %>%  
  str_replace_all("[0-9]", "") %>%                
  str_squish()

percy3_text <- read_file("Percy Jackson 3.txt")

percy3_clean <- percy3_text %>%
  tolower() %>%
  replace_non_ascii() %>%
  str_replace_all("[■©:.!?”“—(),;’‘_]", " ") %>%  
  str_replace_all("[0-9]", "") %>%                
  str_squish()                                   

percy4_text <- read_file("Percy Jackson 4.txt")

percy4_clean <- percy4_text %>%
  tolower() %>%
  replace_non_ascii() %>%
  str_replace_all("[■©:.!?”“—(),;’‘_]", " ") %>%  
  str_replace_all("[0-9]", "") %>%                
  str_squish()                                   

percy5_text <- read_file("Percy Jackson 5.txt")

percy5_clean <- percy5_text %>%
  tolower() %>%
  replace_non_ascii() %>%
  str_replace_all("[■©:.!?”“—(),;’‘_]", " ") %>%  
  str_replace_all("[0-9]", "") %>%                
  str_squish()                                   

#instead of file, out it in a list so it will be easier when we try to identify book by sentence
books_fulltext <- list(
  HarryPotter = hp_clean,
  Percy1 = percy1_clean,
  Percy2 = percy2_clean,
  Percy3 = percy3_clean,
  Percy4 = percy4_clean,
  Percy5 = percy5_clean
)

combined_books <- tibble(
  book = names(books_fulltext),
  text = unlist(books_fulltext)
)

#save those into one file
save(combined_books, file = "12_DataSaving.RData")

head(combined_books)


```
