---
title: "21_DataProcessing"
output: html_document
---
```{r setup, include=FALSE}
source("00_requirements.R")

load("12_DataSaving.RData")

#convert into list for using tm
books_fulltext <- setNames(as.list(combined_books$text), combined_books$book)

clean_tm <- function(book_text) {
  #created corpus
  corpus <- VCorpus(VectorSource(book_text))
  #remove the stop words
  corpus <- tm_map(corpus, removeWords, stopwords("english"))
  #remove extra whitespaces
  corpus <- tm_map(corpus, stripWhitespace)
  #words into vector
  words <- str_split(corpus[[1]]$content, " ")[[1]]
  #remove empty string
  words <- words[nchar(words) > 0]
return(words)
}
#make the changes into all the books
books_words <- lapply(books_fulltext, clean_tm)
#some test
books_words$Percy1[1:20]
```